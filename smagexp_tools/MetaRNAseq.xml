<tool id="metarnaseq" name="RNA-seq data meta-analysis" version="1.0.0">

    <description>Performs meta-analysis thanks to metaRNAseq</description>

    <requirements>
        <requirement type="package">bioconductor-affy</requirement>
        <requirement type="package">bioconductor-annaffy</requirement>
        <requirement type="package">bioconductor-geoquery</requirement>
        <requirement type="package">r-venndiagram</requirement>
        <requirement type="package">r-jsonlite</requirement> 
        <requirement type="package">r-metarnaseq</requirement>
        <requirement type="package">r-optparse</requirement>
    </requirements>	

    <stdio>
        <exit_code range="1:" />
        <regex match="Warning" source="both" level="warning"/>
    </stdio>

    <command>

    <![CDATA[ 	
        Rscript 
        ${__tool_directory__}/MetaRNASeq.R 
            --input "#for $input in $inputs# $input;$input.name, #end for#"
            --result $top_table
            --htmloutput $result_html 
            --htmloutputpath $result_html.extra_files_path
            --htmltemplate ${__tool_directory__}/MetaRNASeq_tpl.html	
    ]]>	
    </command>

    <inputs>
        <param format="tabular" name="inputs" multiple="true" type="data" optional="false" label="Counts file" help="Must have the same number of row in each study. The experimental conditions must be specified in the header of each file"/>
    </inputs>

    <outputs>
        <data format="tabular" name="top_table" label="Summary of meta-analysis and single studie analysis from ${tool.name} on ${on_string}"/>
        <data format="html" name="result_html" label="Charts for ${tool.name} on ${on_string}"/>
    </outputs>
    
    <tests>
        
    </tests>

    <help>

    </help>

</tool>
